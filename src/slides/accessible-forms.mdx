import highlight from '@mdx-deck/themes/syntax-highlighter-prism';
import SectionSlide from '../layout/section-slide';
import Slide from '../layout/slide';
import FullWidthSlide from '../layout/slide-full-width';
import { Link, UnstyledButton } from '../examples/keyboard-functionality';
import { DisappearingFocus, FocusRingContrast } from '../examples/keyboard-focus';
import { SpanButton, AriaButton, RegularButton } from '../examples/aria-magic';
import { NoLabels, ImplicitlyConnectedLabels, ExplicitlyConnectedLabels, ExplicitlyConnectedHiddenLabels, AriaLabel, AriaLabelHidden } from '../examples/labels';
import { HelperTextInLabel, AriaHelperText } from '../examples/helper-text';
import { UngroupedInputs, GroupingWithHtml, GroupingWithAria } from '../examples/grouping-inputs';
import { ErrorTextInLabel, AriaErrorText, AriaInvalid } from '../examples/error-messages';
import customTheme from '../css/slide-theme';
import { Flexbox } from '../layout/slide-flexbox';

export const themes = [highlight, customTheme];

<Slide>

# Developing accessible forms

- Krystal Klumpp
- Senior UI Engineer, SoFi
- Helena, MT
- kklumpp@sofi.org
- https://www.linkedin.com/in/krystalklumpp
- slide link

</Slide>

---

<SectionSlide>

# Why forms?

</SectionSlide>

--- 

<FullWidthSlide>

  # WCAG 2.1 success criteria

<Flexbox>
  <ul>
    <li style={{fontSize:'1.3rem'}}>1.1.1	Non-text Content</li>
    <li style={{fontSize:'1.3rem'}}>1.1.1	Non-text Content</li>
    <li style={{fontSize:'1.3rem'}}>1.2.1	Audio-only and Video-only (Prerecorded)</li>
    <li style={{fontSize:'1.3rem'}}>1.2.2	Captions (Prerecorded)</li>
    <li style={{fontSize:'1.3rem'}}>1.2.3	Audio Description or Media Alternative (Prerecorded)</li>
    <li style={{fontSize:'1.3rem'}}>1.2.4	Captions (Live)</li>
    <li style={{fontSize:'1.3rem'}}>1.2.5	Audio Description (Prerecorded)</li>
    <li style={{fontSize:'1.3rem'}}>1.2.6	Sign Language (Prerecorded)</li>
    <li style={{fontSize:'1.3rem'}}>1.2.7	Extended Audio Description (Prerecorded)</li>
    <li style={{fontSize:'1.3rem'}}>1.2.8	Media Alternative (Prerecorded)</li>
    <li style={{fontSize:'1.3rem'}}>1.2.9	Audio-only (Live)</li>
    <li style={{fontSize:'1.3rem'}}>1.3.1	Info and Relationships</li>
    <li style={{fontSize:'1.3rem'}}>1.3.2	Meaningful Sequence</li>
    <li style={{fontSize:'1.3rem'}}>1.3.3	Sensory Characteristics</li>
    <li style={{fontSize:'1.3rem'}}>1.3.4	Orientation</li>
    <li style={{fontSize:'1.3rem'}}>1.3.5	Identify Input Purpose</li>
    <li style={{fontSize:'1.3rem'}}>1.3.6	Identify Purpose</li>
    <li style={{fontSize:'1.3rem'}}>1.4.1	Use of Color</li>
    <li style={{fontSize:'1.3rem'}}>1.4.2	Audio Control</li>
    <li style={{fontSize:'1.3rem'}}>1.4.3	Contrast (Minimum)</li>
    <li style={{fontSize:'1.3rem'}}>1.4.4	Resize text</li>
    <li style={{fontSize:'1.3rem'}}>1.4.5	Images of Text</li>
    <li style={{fontSize:'1.3rem'}}>1.4.6	Contrast (Enhanced)</li>
    <li style={{fontSize:'1.3rem'}}>1.4.7	Low or No Background Audio</li>
    <li style={{fontSize:'1.3rem'}}>1.4.8	Visual Presentation</li>
    <li style={{fontSize:'1.3rem'}}>1.4.9	Images of Text (No Exception)</li>
  </ul>
  
  <ul>
    <li style={{fontSize:'1.3rem'}}>1.4.10	Reflow</li>
    <li style={{fontSize:'1.3rem'}}>1.4.11	Non-text Contrast</li>
    <li style={{fontSize:'1.3rem'}}>1.4.12	Text Spacing</li>
    <li style={{fontSize:'1.3rem'}}>1.4.13	Content on Hover or Focus</li>
    <li style={{fontSize:'1.3rem'}}>2.1.1	Keyboard</li>
    <li style={{fontSize:'1.3rem'}}>2.1.2	No Keyboard Trap</li>
    <li style={{fontSize:'1.3rem'}}>2.1.3	Keyboard (No Exception)</li>
    <li style={{fontSize:'1.3rem'}}>2.1.4	Character Key Shortcuts</li>
    <li style={{fontSize:'1.3rem'}}>2.2.1	Timing Adjustable</li>
    <li style={{fontSize:'1.3rem'}}>2.2.2	Pause, Stop, Hide</li>
    <li style={{fontSize:'1.3rem'}}>2.2.3	No Timing</li>
    <li style={{fontSize:'1.3rem'}}>2.2.4	Interruptions</li>
    <li style={{fontSize:'1.3rem'}}>2.2.5	Re-authenticating</li>
    <li style={{fontSize:'1.3rem'}}>2.2.6	Timeouts</li>
    <li style={{fontSize:'1.3rem'}}>2.3.1	Three Flashes or Below Threshold</li>
    <li style={{fontSize:'1.3rem'}}>2.3.2	Three Flashes</li>
    <li style={{fontSize:'1.3rem'}}>2.3.3	Animation from Interactions</li>
    <li style={{fontSize:'1.3rem'}}>2.4.1	Bypass Blocks</li>
    <li style={{fontSize:'1.3rem'}}>2.4.2	Page Titled</li>
    <li style={{fontSize:'1.3rem'}}>2.4.3	Focus Order</li>
    <li style={{fontSize:'1.3rem'}}>2.4.4	Link Purpose (In Context)</li>
    <li style={{fontSize:'1.3rem'}}>2.4.5	Multiple Ways</li>
    <li style={{fontSize:'1.3rem'}}>2.4.6	Headings and Labels</li>
    <li style={{fontSize:'1.3rem'}}>2.4.7	Focus Visible</li>
    <li style={{fontSize:'1.3rem'}}>2.4.8	Location</li>
    <li style={{fontSize:'1.3rem'}}>2.4.9	Link Purpose (Link Only)</li>
  </ul>

  <ul>
    <li style={{fontSize:'1.3rem'}}>2.4.10	Section Headings</li>
    <li style={{fontSize:'1.3rem'}}>2.5.1	Pointer Gestures</li>
    <li style={{fontSize:'1.3rem'}}>2.5.2	Pointer Cancellation</li>
    <li style={{fontSize:'1.3rem'}}>2.5.3	Label in Name</li>
    <li style={{fontSize:'1.3rem'}}>2.5.4	Motion Actuation</li>
    <li style={{fontSize:'1.3rem'}}>2.5.5	Target Size</li>
    <li style={{fontSize:'1.3rem'}}>2.5.6	Concurrent Input Mechanisms</li>
    <li style={{fontSize:'1.3rem'}}>3.1.1	Language of Page</li>
    <li style={{fontSize:'1.3rem'}}>3.1.2	Language of Parts</li>
    <li style={{fontSize:'1.3rem'}}>3.1.3	Unusual Words</li>
    <li style={{fontSize:'1.3rem'}}>3.1.4	Abbreviations</li>
    <li style={{fontSize:'1.3rem'}}>3.1.5	Reading Level</li>
    <li style={{fontSize:'1.3rem'}}>3.1.6	Pronunciation</li>
    <li style={{fontSize:'1.3rem'}}>3.2.1	On Focus</li>
    <li style={{fontSize:'1.3rem'}}>3.2.2	On Input</li>
    <li style={{fontSize:'1.3rem'}}>3.2.3	Consistent Navigation</li>
    <li style={{fontSize:'1.3rem'}}>3.2.4	Consistent Identification</li>
    <li style={{fontSize:'1.3rem'}}>3.2.5	Change on Request</li>
    <li style={{fontSize:'1.3rem'}}>3.3.1	Error Identification</li>
    <li style={{fontSize:'1.3rem'}}>3.3.2	Labels or Instructions</li>
    <li style={{fontSize:'1.3rem'}}>3.3.3	Error Suggestion</li>
    <li style={{fontSize:'1.3rem'}}>3.3.4	Error Prevention</li>
    <li style={{fontSize:'1.3rem'}}>3.3.5	Help</li>
    <li style={{fontSize:'1.3rem'}}>3.3.6	Error Prevention (All)</li>
    <li style={{fontSize:'1.3rem'}}>4.1.1	Parsing</li>
    <li style={{fontSize:'1.3rem'}}>4.1.2	Name, Role, Value</li>
    <li style={{fontSize:'1.3rem'}}>4.1.3	Status Messages</li>
  </ul>

</Flexbox>

</FullWidthSlide>

---

<SectionSlide>

# Terminology

</SectionSlide>

---

<Slide>

# WCAG

Web Content Accessibility Guidelines
- WCAG 2.0 (1998)
- WCAG 2.1 (2018)

</Slide>

---

<Slide>

# Semantic

</Slide>

---

<Slide>

# WAI-ARIA

Web Accessibility Initiative - Accessible Rich Internet Applications

</Slide>

---

<Slide>

  # Principle 2

> "ARIA can both cloak and enhance, creating both power and danger"



</Slide>

---

<Slide>

TODO: Add image

</Slide>

---

<Slide>

# Assistive technology

</Slide>

---

<Slide>

# People use the Internet in many ways

<Flexbox> 
<div>

- Screen readers
- Screen magnifiers
- Speech recognition software
- Refreshable Braille display
- Eye tracking
- Joystick
- Head pointer
- Sip-and-puff

</div>
<div>

- Switches
- Audio descriptions
- Transcripts
- Reader mode
- Pop-up and animation blockers
- High contrast mode
- Custom stylesheets
- Glasses 

</div>
</Flexbox>

</Slide>

---

<SectionSlide>

# Keyboards

</SectionSlide>

---

<SectionSlide>

# Keyboard functionality

</SectionSlide>

---

<Slide>

# HTML usage

Expected link behavior

<Link href="http://example.com">Visit example.com</Link>


```html
<a href="http://example.com/">Visit example.com</a>
```
    
...but what if the link doesn't have an `href`?

<Link>Open</Link>

```html
<a>Open</a>
```

</Slide>

---

<Slide>

## Suggested Solution

<UnstyledButton type="button">Open</UnstyledButton>

```html
<button type="button">Open</button>
```

<Link tabindex="0">Open</Link>

```html
<a tabindex="0">Open</a>
```

</Slide>

---

<Slide>

# JavaScript magic

TODO: Demo for inaccessible custom select

</Slide>

---

<Slide>

# ARIA magic

<SpanButton />

```html
<span>Next</span>
```

<AriaButton />

```html
<span role="button">Next</span>
```

<RegularButton />

```html
<button>Next</button>
```

</Slide>

---

<SectionSlide>

# Keyboard focus

</SectionSlide>

---

<Slide>

# Focus rings

TODO: Image of different focus rings


<Flexbox>
  <FocusRingContrast />
  <FocusRingContrast isDark />
</Flexbox>

</Slide>

---

<Slide>

# Disappearing focus

<DisappearingFocus />

</Slide>

--- 

<SectionSlide>

# Labels

</SectionSlide>

---

<SectionSlide>

> "59% of the 3.4 million form inputs identified were unlabled."
[The WebAIM Million](https://webaim.org/projects/million/)

</SectionSlide>

---

<Slide>

# Uconnected labels

<NoLabels />

```html
<label>First Name</label>
<input type="text" />
```

</Slide>

---

<Slide>

# Explicitly connecting a visible label

<ExplicitlyConnectedLabels />

```html
<label for="firstName">First Name</label>
<input type="text" id="firstName" />
```

</Slide>

---

<Slide>

# Explicitly connecting a hidden label 

<ExplicitlyConnectedHiddenLabels />

```html
<label for="search">Search</label>
<input type="text" id="search" placeholder="Search" />
```

```css
.visually-hidden {
  clip: rect(0px, 0px, 0px, 0px);
  height: auto;
  position: absolute;
  width: 1px;
  white-space: nowrap;
  border-width: 0px;
  border-style: initial;
  border-color: initial;
  border-image: initial;
  margin: 0px;
  overflow: hidden;
  padding: 0px;
}
```

</Slide>

---

<Slide>

# Implicitly connecting a label

<ImplicitlyConnectedLabels />

```html
<label>
  First Name
  <input type="text" />
</label>
```

</Slide>

---

<Slide>

# Connecting a visible label with ARIA

<AriaLabel />

```html
<p id="firstName">First Name</P>
<input type="text" aria-labelledby="firstName" />
```

</Slide>

---

<Slide>

# Connecting a hidden label with ARIA

<AriaLabelHidden />

```html
<input type="text" aria-label="Search" placeholder="Search" />
```

</Slide>

---

<SectionSlide>

# Grouping inputs

</SectionSlide>

---

<Slide>

<UngroupedInputs />

</Slide>

---

<Slide>

# Grouping inputs with HTML

<GroupingWithHtml />

```html
<fieldset>
  <legend>Date of birth</legend>
  <div>
    <label for="month">Month</label>
    <input id="month" type="text" />
  </div>
  ...
</Fieldset>
```

</Slide>

---

<Slide>

# Grouping inputs with ARIA

<GroupingWithAria />

```html

<h3 id="dateOfBirth">Date of birth</h3>
<div row="group" aria-labelledby="dateOfBirth">
  <div>
    <label for="month">Month</label>
    <input id="month" type="text" />
  </div>
  ...
</div>

```

</Slide>

---

<Slide>

# When to Group
- Multiple choice questions
- Multiple related fields

</Slide>

---

<SectionSlide>

# Error prevention

</SectionSlide>

---

<Slide>

# Helper text

<HelperTextInLabel />

</Slide>

---

<Slide>

# Placing helper text in a label

<HelperTextInLabel />

```html
<label for="email">
  <span>Email</span>
  <span>We will not spam you, or sell your email address.</span>
</label>
<input type="email" id="email" />
```

</Slide>

---

<Slide>

# Connecting helper text with ARIA

<AriaHelperText />

```html
<label htmlFor="ariaEmail">
  Email
</label>
<input type="email" id="ariaEmail" aria-describedby="emailHelper" />
<p id="emailHelper">We will not spam you, or sell your email address.</p>
```

</Slide>

---

<SectionSlide>

# Error messaging

</SectionSlide>

---

<Slide>

# Letting a user know an error happened

TODO: Demo

</Slide>

---

<Slide>

ARIA settings: Polite vs assertive

</Slide>

---

<Slide>

# Placing error text in a label

<ErrorTextInLabel />

```html
<label for="firstName">
  <span>First Name</span>
  <span>A first name is required.</span>
</label>
<input type="text" id="firstName" />
```

</Slide>

---

<Slide>

# Connecting error text with ARIA

<AriaErrorText />

```html
<label for="firstName">
  Email
</label>
<input type="text" id="firstName" aria-describedby="firstNameHelper" />
<p id="firstNameHelper">A first name is required.</p>
```

</Slide>

---

<Slide>

# Using aria-invalid

<AriaInvalid />

```html
<label for="firstName">
  <span>First Name</span>
  <span>A first name is required.</span>
</label>
<input type="text" id="firstName" aria-invalid="true" />
```

</Slide>

---

<SectionSlide>

# Closing

</SectionSlide>

---

<Slide>

# Resources

</Slide>
