import highlight from '@mdx-deck/themes/syntax-highlighter-prism';
import SectionSlide from '../layout/section-slide';
import Slide from '../layout/slide';
import { DisappearingFocus } from '../examples/keyboard-focus';
import { SpanButton, AriaButton, RegularButton } from '../examples/aria-magic';
import { NoLabels, ImplicitlyConnectedLabels, ExplicitlyConnectedLabels, ExplicitlyConnectedHiddenLabels, AriaLabel, AriaLabelHidden } from '../examples/labels';
import { HelperTextInLabel, AriaHelperText } from '../examples/helper-text';
import { UngroupedInputs, GroupingWithHtml, GroupingWithAria } from '../examples/grouping-inputs';
import { ErrorTextInLabel, AriaErrorText, AriaInvalid } from '../examples/error-messages';
import customTheme from '../css/slide-theme';
export const themes = [highlight, customTheme];

<Slide>

# Developing accessible forms

- Krystal Klumpp
- Senior UI Engineer, SoFi
- Helena, MT
- kklumpp@sofi.org
- https://www.linkedin.com/in/krystalklumpp
- slide link

</Slide>

---

<SectionSlide>

# Why forms?

</SectionSlide>

--- 

<Slide>

TODO: List out WCAG requirements

</Slide>

---

<SectionSlide>

# Terminology

</SectionSlide>

---

<Slide>

# WCAG

Web Content Accessibility Guidelines
- WCAG 2.0 (1998)
- WCAG 2.1 (2018)

</Slide>

---

<Slide>

# Semantic

</Slide>

---

<Slide>

# WAI-ARIA

Web Accessibility Initiative - Accessible Rich Internet Applications

</Slide>

---

<Slide>

"ARIA can both cloak and enhance, creating both power and danger"
Principle 2
WAI-ARIA practices documentation https://www.w3.org/TR/wai-aria-practices-1.2/#no_aria_better_bad_aria

</Slide>

---

<Slide>

TODO: Add image

</Slide>

---

<Slide>

# Assistive technology

</Slide>

---

<Slide>

- Screen readers
- Screen magnifiers
- Speech recognition software
- Refreshable Braille display
- Eye tracking
- Joystick
- Head pointer
- Sip-and-puff
- Switches
- Audio descriptions
- Transcripts
- Reader mode
- Pop-up and animation blockers
- High contrast mode
- Custom stylesheets
- Glasses 

</Slide>

---

<SectionSlide>

# Keyboards

</SectionSlide>

---

<Slide>

# What to look for
## Functionality

</Slide>

---

<Slide>

# Problem 1: We use HTML in a way that's not quite right

## Expected link behavior

<a href="http://example.com/">Visit example.com</a>

```html
<a href="http://example.com/">Visit example.com</a>
```
    
## Problem
<a>Open</a>

```html
<a>Open</a>
```

## Suggested Solution

```html
<button type="button">Text</button>
```

<a tabindex="0">Open</a>

```html
<a tabindex="0">Open</a>
```

</Slide>

---

<Slide>

# Problem 2: JavaScript magic

TODO: Demo for inaccessible custom select

Link: WAI-ARIA 1.1 Authoring practices

</Slide>

---

<Slide>

# Problem 3: ARIA magic

<SpanButton />

```html
<span>Next</span>
```

<AriaButton />

```html
<span role="button">Next</span>
```

<RegularButton />

```html
<button>Next</button>
```

</Slide>

---

<Slide>

# Suggestions: Functionality

- Use built-in keyboard behavior where possible
- Use HTML instead of roles
- Test all third-party libraries
- Become familiar with common keyboard interactions

</Slide>

---

<Slide>

# What to look for: Focus

</Slide>

---

<Slide>

# Problem 1: Focus rings

TODO: Image of different focus rings
TODO: Image of focus rings against background color
Link: 2.1 non-text requirement

</Slide>

---

<Slide>

# Problem 2: Disappearing focus

<DisappearingFocus />

</Slide>

--- 

TODO: Table for hiding things

---

<SectionSlide>

# Labels

</SectionSlide>

---

<Slide>

"59% of the 3.4 million form inputs identified were unlabled."
[The WebAIM Million](https://webaim.org/projects/million/)

</Slide>

---

<Slide>

# Uconnected labels

<NoLabels />

```html
<label>First Name</label>
<input type="text" />
```
Note: Show touch area & SR output

</Slide>

---

<Slide>

# Explicitly connecting a visible label

<ExplicitlyConnectedLabels />

```html
<label for="firstName">First Name</label>
<input type="text" id="firstName" />
```
Note: Show touch area & SR output

</Slide>

---

<Slide>

# Explicitly connecting a hidden label 

<ExplicitlyConnectedHiddenLabels />

```html
<label for="firstName">First Name</label>
<input type="text" id="firstName" />
```

```css
.visually-hidden {
  clip: rect(0px, 0px, 0px, 0px);
  height: auto;
  position: absolute;
  width: 1px;
  white-space: nowrap;
  border-width: 0px;
  border-style: initial;
  border-color: initial;
  border-image: initial;
  margin: 0px;
  overflow: hidden;
  padding: 0px;
}
```

Note: Show touch area & SR output

</Slide>

---

<Slide>

# Implicitly connecting a label

<ImplicitlyConnectedLabels />

```html
<label>
  First Name
  <input type="text" />
</label>
```
Note: Show touch area & SR output

</Slide>

---

<Slide>

# Connecting a visible label with ARIA

<AriaLabel />

```html
<p id="firstName">First Name</P>
<input type="text" aria-labelledby="firstName" />
```
Note: Show touch area & SR output

</Slide>

---

<Slide>

# Connecting a hidden label with ARIA

<AriaLabelHidden />

```html
<input type="text" aria-label="First name" />
```

Note: Show touch area & SR output

</Slide>

---

<SectionSlide>

# Grouping inputs

</SectionSlide>

---

<Slide>

Grouped input example (show x is related to y)

<UngroupedInputs />

</Slide>

---

<Slide>

# Grouping inputs with HTML

<GroupingWithHtml />

```html
<fieldset>
  <legend>Date of birth</legend>
  <div>
    <div>
      <label for="month">Month</label>
      <input id="month" type="text" />
    </div>
    <div>
      <label for="day">Day</label>
      <input id="day" type="text" />
    </div>
    <div>
      <label for="year">Year</label>
      <input id="year" type="text" />
    </div>
  </div>
</Fieldset>
```

</Slide>

---

<Slide>

# Grouping inputs with ARIA

<GroupingWithAria />

```html

<h3 id="dateOfBirth">Date of birth</h3>
<div row="group" aria-labelledby="dateOfBirth">
  <div>
    <label for="month">Month</label>
    <input id="month" type="text" />
  </div>
  <div>
    <label for="day">Day</label>
    <input id="day" type="text" />
  </div>
  <div>
    <label for="year">Year</label>
    <input id="year" type="text" />
  </div>
</div>

```

</Slide>

---

<Slide>

# When to Group

</Slide>

---

<SectionSlide>

# Error prevention

</SectionSlide>

---

<Slide>

TODO: Demo of helper text for sighted users

<HelperTextInLabel />

</Slide>

---

<Slide>

# Placing helper text in a label

<HelperTextInLabel />

```html
<label for="htmlEmail">
  <span>Email</span>
  <span>We will not spam you, or sell or rent your email address.</span>
</label>
<input type="email" id="htmlEmail" />
```
TODO: Link to Tenon article

</Slide>

---

<Slide>

# Connecting helper text with ARIA

<AriaHelperText />

```html
<label htmlFor="ariaEmail">
  Email
</label>
<input type="email" id="ariaEmail" aria-describedby="emailHelper" />
<p id="emailHelper">We will not spam you, or sell or rent your email address.</p>
```

</Slide>

---

<SectionSlide>

# Error messaging

</SectionSlide>

---

<Slide>

# Letting a user know an error happened

TODO: Demo

</Slide>

---

<Slide>

ARIA settings: Polite vs assertive

</Slide>

---

<Slide>

# Placing error text in a label
TODO: Demo

<ErrorTextInLabel />

```html
<label for="firstName">
  <span>First Name</span>
  <span>A first name is required.</span>
</label>
<input type="text" id="firstName" />
```

</Slide>

---

<Slide>

# Connecting error text with ARIA

<AriaErrorText />

```html
<label for="firstName">
  Email
</label>
<input type="text" id="firstName" aria-describedby="firstNameHelper" />
<p id="firstNameHelper">A first name is required.</p>
```

</Slide>

---

<Slide>

# Using aria-invalid

<AriaInvalid />

```html
<label for="firstName">
  <span>First Name</span>
  <span>A first name is required.</span>
</label>
<input type="text" id="firstName" aria-invalid="true" />
```

</Slide>

---

<SectionSlide>

# Closing

</SectionSlide>

---

<Slide>

# Resources

</Slide>
